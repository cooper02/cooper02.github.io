---
title: 镜像加速器
tags: Docker
categories: 
- Docker
- 云原生
---
## 序言
你之前是否经历过一种痛苦，就是在安装minikube或者Kubernetes的时候，总要去拉去gcr.io或者docker.io仓库去拉取镜像，速度慢的急死个人？那个时候你也话使用过一种叫做镜像加速器的东西，阿里云或者daocloud都有提供，但使用下来速度就明显提升。那镜像加速器是什么原理呢？怎么样搭建自己的镜像加速器呢？这篇文章将揭晓这些问题的答案.

<!-- more -->

## 原理
镜像加速的原理很简单，其实就是使用代理仓库，
## requirement
搭建镜像加速器，你需要在海外有一台机器，配置应该在1c1g以上，太小的配置，怕性能跟不上，影响镜像拉取的速度。
先把需要的内容列一下：
- 一台1g1c以上配置的海外云主机，香港的更好
- 一个域名，申请好免费的证书，后边配置会使用到

## 搭建
搭建方式有几种，我这里给出2种比较简单的方式，Docker与Docker-compose，因为我只有一台机器。
### Docker方式
首先进入到云主机，把docker安装好, 使用到了registry镜像的cache模式:
启动一个registry用如下命令:
```
docker run -d registry:2
```
